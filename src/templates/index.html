<!DOCTYPE html>
{% extends "menu.html" %}

{% block content %}
<html lang="en" dir="ltr">
 
<body style="background-image: url('https://www.bbva.com/wp-content/uploads/2018/10/Portada-Phishing-1920x1441.jpg');">
</body>
<center style="margin-top: 90px;">

  <br>
  <h1 class="text-white">Antiphishing Phishing Club </h1>
  <div class="single-url">
    <div class="input-group input-group-lg" style="width: 850px;margin-top: 50px">
      <div class="input-group-prepend">
        <span class="input-group-text" id="inputGroup-sizing-lg">URL:</span>
      </div>


      <input type="text" class="form-control" placeholder="Ingrese el URL para validar" id="url" value="">

      <button type="submit" id="submit" class="btn getResult btn-info btn-lg mb-2"
        style="margin-left: 10px">Validar</button>
      <button type="submit" id="clear" class="btn getResult btn-info btn-lg mb-2" onclick="clearField()"
        style="margin-left: 10px">Limpiar</button>



    </div>

  </div>

  <div class="result"></div>

  <a href=detalleurl>
    <button type="submit" id="redirect" class="btn getResult btn-info btn-lg mb-2" style="display:none">Mostrar
      Detalles</button>
  </a>

  <button type="button" id="reload" class="btn getResult btn-info btn-lg mb-2" onclick="reloadPage()"
    style="display:none">Recargar p√°gina</button>
  </body>

</center>







<table border="true" id="dataTable" style="display:none">
  <tbody>




  </tbody>
</table>





<script>

  function clearField() {
    document.getElementById('url').value = '';
  }



  document.getElementsByClassName("getResult")[0].addEventListener("click", result);
  function result() {

    var div = document.querySelector(".result");
    var urlname = document.getElementById('url').value;


    /*var f=[];*/
    $.ajax({
      data: {
        name: urlname
      },
      type: 'GET',
      url: '/result'
    }).always(div.innerHTML = '<div class="loading-dots mt-4"><div class="loading-dots--dot"></div><div class="loading-dots--dot"></div><div class="loading-dots--dot"></div></div>')
      .done(function (data) {



        if (data.error) {
          alert(data.error);
        }

        else {
          var newHTML = '<h3 class="text-white mt-4">Esto ' + data[1] + '</h3>';
          div.innerHTML = newHTML;
          f = data[0];

          document.getElementById('dataTable').style.display = "block";
          document.getElementById('redirect').style.display = "block";
          document.getElementById('reload').style.display = "block";

        }



      });

    var lst;
    $.ajax({
      data: {
        name: urlname
      },
      type: 'GET',
      url: '/details'
    }).done(function (data) {
      lst = data;
      document.getElementById("domain").innerHTML = lst[0];
      document.getElementById("c_date").innerHTML = lst[1];
      document.getElementById("e_date").innerHTML = lst[2];
      document.getElementById("reg").innerHTML = lst[3];
      document.getElementById("length").innerHTML = lst[4];
      document.getElementById("reg_length").innerHTML = lst[5];
    });


    document.getElementById('redirect').onclick = function () {

      sessionStorage.setItem('array', JSON.stringify(f));
    }

  }



  function reloadPage() {
    location.reload();
  }



</script>

</html>
{% endblock %}